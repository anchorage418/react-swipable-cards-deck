(this["webpackJsonpmy-swiper"]=this["webpackJsonpmy-swiper"]||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0),c=n.n(r),a=n(46),o=n.n(a),s=(n(56),n(2)),l=n(3),d=n(6),u=n(10),f=n(50),b=n(47),j=n.n(b),h=n(48),O=n.n(h),x=n(49),g=n.n(x),m=(n(145),function(e){return"perspective(1500px) translateZ(".concat(e,"px)")}),p=function(e,t,n){return e||t?"translate3d(".concat(e,"px, ").concat(t,"px, 0px) rotate(").concat(n,"deg)"):"none"},v={filterTaps:!0},y=Object(r.forwardRef)((function(e,t){var n=e.adaptiveHeight,a=e.shiftY,o=void 0===a?13:a,b=e.items,h=e.leftLabel,x=e.maxVisibleStack,y=e.onSwipeLeft,w=e.onSwipeRight,S=e.onSwipeStart,k=e.onSwipeEnd,N=e.renderItem,L=e.resizeDebounce,C=void 0===L?1e3:L,z=e.rightLabel,R=e.translateZ,I=void 0===R?-30:R,T=e.trashhold,B=void 0===T?70:T,E=Object(r.useState)({drag:{},heights:[]}),H=Object(s.a)(E,2),M=H[0],_=H[1],F=Object(r.useState)(Object(d.a)(b)),J=Object(s.a)(F,2),A=J[0],D=J[1],G=Object(r.useState)((function(){return new Set})),P=Object(s.a)(G,1)[0],V=Object(r.useState)(0),Z=Object(s.a)(V,2),K=Z[0],W=Z[1],Y=Object(r.useState)(""),q=Object(s.a)(Y,2),Q=q[0],U=q[1],X=Object(r.useState)(0),$=Object(s.a)(X,2),ee=$[0],te=$[1],ne=Object(r.useState)(0),ie=Object(s.a)(ne,2),re=ie[0],ce=ie[1],ae=Object(u.c)(A.length,(function(e){return Object(l.a)(Object(l.a)({},function(e,t,n){return{x:0,y:e*t,z:e*n,rot:0,delay:100*e}}(e,o,I)),{},{from:{x:0,y:0,z:0,rot:0}})})),oe=Object(s.a)(ae,2),se=oe[0],le=oe[1],de=ee+(1===A.length?0:A.length<=x?A.length*o:x*o),ue=window.innerWidth+200;console.log("containerHeight",de),console.log("height",ee),console.log("logs",M),console.log("resize",re);var fe=Object(r.useRef)([{},!1]),be=Object(r.useRef)(ee),je=Object(r.useRef)(b),he=Object(r.useCallback)((function(e){setTimeout((function(){!n||null===e||!fe.current||fe.current[0][e.id]&&fe.current[0][e.id].offsetHeight===e.offsetHeight||(fe.current[0][e.id]=e,fe.current[1]=Object.keys(fe.current[0]).length===A.length,fe.current[1]&&ce((function(e){return e+1})))}),0)}),[JSON.stringify(A)]);function Oe(e){return A[e]?A.map((function(e,t){return t})).splice(e,A.length):[]}function xe(e){return ue*e}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((e=+e)>=0&&A[e]){var t=Oe(e);le((function(n){return n<e?P.has(n)?void 0:(P.add(n),{x:-1*ue,rot:70,delay:0}):(P.has(n)&&P.delete(n),{x:0,y:t.indexOf(n)*o,z:t.indexOf(n)*I,rot:0,delay:0})})),W(e)}}function me(){var e=K-1;if(e>=0&&A[e]){var t=Oe(e);le((function(n){return n===e?(P.has(n)&&P.delete(n),{x:0,y:0,z:0,rot:0,delay:0}):n>e?{x:0,y:t.indexOf(n)*o,z:t.indexOf(n)*I,rot:0,delay:0}:void 0})),W(e)}}function pe(){var e=Oe(K+1),t=xe(-1);return P.add(K),le((function(n){return n===K?{x:t,y:0,rot:70,delay:0,config:{friction:50,tension:500}}:!P.has(n)&&e.length?{x:0,y:e.indexOf(n)*o,z:e.indexOf(n)*I,rot:0,delay:0}:void 0})),W(K+1),{item:A[K],index:K}}function ve(){var e=Oe(K+1),t=xe(1);return P.add(K),le((function(n){return n===K?{x:t,rot:-70,delay:0,config:{friction:50,tension:500}}:!P.has(n)&&e.length?{x:0,y:e.indexOf(n)*o,z:e.indexOf(n)*I,rot:0,delay:0}:void 0})),W(K+1),{item:A[K],index:K}}Object(r.useEffect)((function(){if(n&&fe.current[1]){function e(){var e=j()(fe.current[0],(function(e){e.style="";var t=e.offsetHeight;return e.style="flex: 1;",t})),t=Math.max.apply(Math,Object(d.a)(e));t!==ee&&(be.current=t,te(t)),_((function(t){return Object(l.a)(Object(l.a)({},t),{},{heights:e})}))}var t=O()((function(){e()}),C);return window.addEventListener("resize",t),e(),function(){window.removeEventListener("resize",t)}}}),[n,re]),Object(r.useEffect)((function(){g()(je.current,b)||(P.clear(),fe.current=[{},!1],te(0),D(b),W(0))}),[JSON.stringify(b)]),Object(r.useEffect)((function(){return je.current=b})),Object(r.useImperativeHandle)(t,(function(){return{swipeBack:me,swipeLeft:pe,swipeRight:ve,jumpToCardIndex:ge}}));var ye=Object(f.a)((function(e){var t=e.event,n=(e.canceled,Object(s.a)(e.args,1)[0]),i=e.down,r=Object(s.a)(e.movement,1)[0],c=Object(s.a)(e.direction,1)[0],a=r<0?"left":"right",d=function(){},u=!1;S&&S(a),le((function(e){if(n===e){var s=i?r:0,f=-1*Math.floor(r/10);if(u=Math.abs(r)>=B&&(c<=0&&"left"===a||c>=0&&"right"===a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&Math.abs(e)>=B?U(e<0?"left":"right"):U("")}(r,i),i||u||(f=0),!i&&u){var b=Oe(e+1);P.add(e),s=xe("left"===a?-1:1),f="left"===a?70:-70,W(e+1),le((function(e){if(!P.has(e)&&b.length)return{x:0,y:b.indexOf(e)*o,z:b.indexOf(e)*I,rot:0,delay:0}})),U(""),"left"===a&&y(A[e],e),"right"===a&&w(A[e],e)}return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{drag:{eventType:t.type,pointerType:t.pointerType,down:i}})})),{x:s,rot:f,delay:0,config:{friction:50,tension:i?800:500},onRest:d}}})),k&&k(a)}),v);return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsxs)("div",{style:{padding:"0 16px",position:"absolute",zIndex:999},children:[Object(i.jsx)("div",{style:{wordBreak:"break-all"},children:"Drag logs: "+JSON.stringify(M.drag)}),Object(i.jsx)("div",{style:{wordBreak:"break-all"},children:"Items height: "+JSON.stringify(M.heights)}),Object(i.jsx)("div",{style:{wordBreak:"break-all"},children:"height: "+ee}),Object(i.jsx)("div",{style:{wordBreak:"break-all"},children:"Current index: ".concat(K)})]}),Object(i.jsx)("div",{className:"deck-wrapper",style:Object(l.a)({},n&&ee>0?{minHeight:de}:{}),children:Object(i.jsx)("div",{className:"deck",style:Object(l.a)({},n&&ee>0?{height:ee}:{}),children:se.map((function(e,t){var r=e.x,c=e.y,a=e.z,o=e.rot;return Object(i.jsx)(u.a.div,{style:Object(l.a)(Object(l.a)({},t>K+x||r<-1*ue?{visibility:"hidden"}:{}),{},{zIndex:t===K?0:t>K?-t:0,transform:Object(u.b)([r,c,o],p)}),className:"card-container",children:Object(i.jsxs)(u.a.div,Object(l.a)(Object(l.a)({},ye(t)),{},{id:"card__".concat(t),style:{transform:Object(u.b)([a],m)},className:"card-outer ".concat(t===K?"front-card":""),children:[t===K&&"left"===Q&&h,t===K&&"right"===Q&&z,Object(i.jsx)("div",{id:"card_ch_".concat(t),ref:he,className:"card-inner",style:Object(l.a)({},n?{boxSizing:"border-box"}:{}),children:N(A[t],t)})]}))},t)}))})})]})})),w=Object(r.memo)(y),S=(n(146),[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"C"},{id:4,name:"D"},{id:5,name:"E"}]),k=[{id:6,name:"F"},{id:7,name:"G"},{id:8,name:"H"},{id:9,name:"I"},{id:10,name:"J"}];var N=[].concat(S,k).map((function(e){return t=50,n=250,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t)+t);var t,n}));var L=function(){var e=Object(r.useState)(S),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useRef)(null);function o(){console.log("CLICK")}var l=Object(r.useCallback)((function(e,t){return Object(i.jsxs)("div",{className:"my-card",children:[Object(i.jsx)("div",{className:"my-card__img",children:"image"}),Object(i.jsx)("div",{className:"my-card__text-content",style:{height:N[t]},onClick:o,children:Object(i.jsxs)("div",{style:{color:"red",textAlign:"center"},children:["card text",Object(i.jsx)("div",{children:e.name})]})})]})}),[]);return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("div",{className:"controllers-wrapper",children:[Object(i.jsx)("button",{className:"controller",onClick:function(){return c([].concat(S,k))},children:"Add cards"}),Object(i.jsx)("button",{className:"controller",onClick:function(){a.current&&a.current.swipeBack&&a.current.swipeBack()},children:"Return Last"}),Object(i.jsx)("button",{className:"controller",onClick:function(){if(a.current&&a.current.swipeLeft){var e=a.current.swipeLeft(),t=e.item,n=e.index;console.log("swipeLeft",t,n)}},children:"Swipe Left"}),Object(i.jsx)("button",{className:"controller",onClick:function(){if(a.current&&a.current.swipeRight){var e=a.current.swipeRight(),t=e.item,n=e.index;console.log("swipeRight",t,n)}},children:"Swipe Right"}),Object(i.jsx)("input",{id:"next-index",type:"number",placeholder:"index",min:0,className:"input"}),Object(i.jsx)("button",{className:"controller",onClick:function(){return e=document.getElementById("next-index").value,void(a.current&&a.current.jumpToCardIndex&&a.current.jumpToCardIndex(e));var e},children:"To index"})]}),Object(i.jsx)(w,{items:n,renderItem:l,ref:a,adaptiveHeight:!0,maxVisibleStack:4,leftLabel:Object(i.jsx)("div",{style:{position:"absolute",right:0},children:"LEFT"}),rightLabel:Object(i.jsx)("div",{style:{position:"absolute",left:0},children:"RIGHT"}),onSwipeLeft:function(e,t){console.log("onSwipeLeft",e,t)},onSwipeRight:function(e,t){console.log("onSwipeRight",e,t)},onSwipeEnd:function(){},onSwipeStart:function(){}})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,148)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(L,{})}),document.getElementById("root")),C()},56:function(e,t,n){}},[[147,1,2]]]);
//# sourceMappingURL=main.fe1f4b40.chunk.js.map