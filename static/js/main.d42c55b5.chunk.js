(this["webpackJsonpmy-swiper"]=this["webpackJsonpmy-swiper"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),i=n.n(c),a=n(46),o=n.n(a),d=(n(55),n(4)),l=n(3),s=n(2),u=n(10),f=n(49),b=n(47),j=n.n(b),h=n(48),O=n.n(h),x=(n(144),function(e){return"perspective(1500px) translateZ(".concat(e,"px)")}),m=function(e,t,n){return e||t?"translate3d(".concat(e,"px, ").concat(t,"px, 0px) rotate(").concat(n,"deg)"):"none"},g={filterTaps:!0},p=Object(c.forwardRef)((function(e,t){var n=e.adaptiveHeight,a=e.shiftY,o=void 0===a?13:a,b=e.items,h=e.leftLabel,p=e.maxVisibleStack,v=e.onDeckHeightChange,y=e.onSwipeLeft,w=e.onSwipeRight,S=e.onSwipeStart,k=e.onSwipeEnd,C=e.renderItem,I=e.rightLabel,N=e.translateZ,L=void 0===N?-30:N,E=e.trashhold,R=void 0===E?70:E,z=Object(c.useState)({drag:{},heights:[]}),B=Object(l.a)(z,2),T=B[0],H=B[1],M=Object(c.useState)(Object(d.a)(b)),_=Object(l.a)(M,2),F=_[0],J=_[1],A=Object(c.useState)((function(){return new Set})),D=Object(l.a)(A,1)[0],G=Object(c.useState)(0),P=Object(l.a)(G,2),V=P[0],W=P[1],Z=Object(c.useState)(""),K=Object(l.a)(Z,2),Y=K[0],q=K[1],Q=Object(c.useState)(0),U=Object(l.a)(Q,2),X=U[0],$=U[1],ee=Object(c.useState)(0),te=Object(l.a)(ee,2),ne=te[0],re=te[1],ce=Object(c.useState)(!1),ie=Object(l.a)(ce,2),ae=ie[0],oe=ie[1],de=Object(u.c)(F.length,(function(e){return Object(s.a)(Object(s.a)({},function(e,t,n){return{x:0,y:e*t,z:e*n,rot:0,delay:100*e}}(e,o,L)),{},{from:{x:0,y:0,z:0,rot:0}})})),le=Object(l.a)(de,2),se=le[0],ue=le[1],fe=X+(1===F.length?0:F.length<=p?F.length*o:p*o);console.log("currentIndex",V),console.log("deck",F);var be=Object(c.useRef)([{},!1]),je=Object(c.useRef)(X),he=Object(c.useRef)(b),Oe=Object(c.useCallback)((function(e){var t=be.current||[{},!1],r=Object(l.a)(t,2),c=r[0];r[1];!n||null===e||!be.current||c[e.id]&&c[e.id].offsetHeight===e.offsetHeight||(c[e.id]=e,be.current[1]=Object.keys(c).length===F.length,be.current[1]&&re((function(e){return e+1})))}),[F.length]);function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(e>=0&&F[e]){var n=t(F[e]);if(n){var r=Object(d.a)(F);r[e]=n,J(r)}}}function me(e){return F[e]?F.map((function(e,t){return t})).splice(e,F.length):[]}function ge(){return F.map((function(e,t){return!D.has(t)&&t})).filter((function(e){return!1!==e}))}function pe(e){return(200+window.innerWidth)*e}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((e=+e)>=0&&F[e]){var t=me(e);ue((function(n){return n<e?D.has(n)?void 0:(D.add(n),{x:-1*(200+window.innerWidth),rot:70,delay:0}):(D.has(n)&&D.delete(n),{x:0,y:13*t.indexOf(n),z:-30*t.indexOf(n),rot:0,delay:0})})),W(e)}}function ye(){var e=Object(d.a)(D),t=e[e.length-1];if(t>=0&&F[t]){D.delete(t);var n=ge();return ue((function(e){if(!D.has(e))return{x:0,y:n.indexOf(e)*o,z:-30*n.indexOf(e),rot:0,delay:0}})),W(0===V?V:V-1),0===D.size&&oe(!1),{item:F[t],index:t}}return{}}function we(e){var t=e>=0?e:V,n=pe(-1);D.add(t);var r=ge();return ue((function(e){return e===t?{x:n,rot:70,delay:0,config:{friction:50,tension:500}}:!D.has(e)&&r.length?{x:0,y:r.indexOf(e)*o,z:-30*r.indexOf(e),rot:0,delay:0}:void 0})),t===V&&W(V+1),oe(!0),{item:F[t],index:t}}function Se(e){var t=e>=0?e:V,n=pe(1);D.add(t);var r=ge();return ue((function(e){return e===t?{x:n,rot:-70,delay:0,config:{friction:50,tension:500}}:!D.has(e)&&r.length?{x:0,y:r.indexOf(e)*o,z:-30*r.indexOf(e),rot:0,delay:0}:void 0})),t===V&&W(V+1),oe(!0),{item:F[t],index:t}}Object(c.useEffect)((function(){if(n&&be.current[1]){function e(){var e=j()(be.current[0],(function(e){e.style="";var t=e.offsetHeight;return e.style="flex: 1;",t})),t=Math.max.apply(Math,Object(d.a)(e));t!==je.current&&(je.current=t,$(t))}var t=O()((function(){e()}),1e3);return window.addEventListener("resize",t),e(),function(){window.removeEventListener("resize",t)}}}),[n,ne]),Object(c.useEffect)((function(){v&&v(fe)}),[fe]),Object(c.useEffect)((function(){he.current!==b&&(D.clear(),be.current=[{},!1],je.current=0,$(0),J(b),W(0),oe(!1))}),[JSON.stringify(b)]),Object(c.useEffect)((function(){return he.current=b})),Object(c.useImperativeHandle)(t,(function(){return{currentIndex:V,isCardSwiped:ae,jumpToCardIndex:ve,swipeBack:ye,swipeLeft:we,swipeRight:Se,updateCard:xe}}));var ke=Object(f.a)((function(e){var t=e.event,n=Object(l.a)(e.args,1)[0],r=e.down,c=Object(l.a)(e.movement,1)[0],i=Object(l.a)(e.direction,1)[0],a=c<0?"left":"right",d=function(){},u=!1;S&&S(a),ue((function(e){if(n===e){var l=r?c:0,f=-1*Math.floor(c/10);if(u=Math.abs(c)>=R&&(i<=0&&"left"===a||i>=0&&"right"===a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&Math.abs(e)>=R?q(e<0?"left":"right"):q("")}(c,r),r||u||(f=0),!r&&u){var b=ge();D.add(e),l=pe("left"===a?-1:1),f="left"===a?70:-70,W(e+1),oe(!0),ue((function(e){if(!D.has(e)&&b.length)return{x:0,y:b.indexOf(e)*o,z:-30*b.indexOf(e),rot:0,delay:0}})),q(""),"left"===a&&y(F[e],e),"right"===a&&w(F[e],e)}return H((function(e){return Object(s.a)(Object(s.a)({},e),{},{drag:{eventType:t.type,pointerType:t.pointerType,down:r}})})),{x:l,rot:f,delay:0,config:{friction:50,tension:r?800:500},onRest:d}}})),k&&k(a)}),g);return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsxs)("div",{style:{padding:"0 16px",position:"absolute",zIndex:999},children:[Object(r.jsx)("div",{style:{wordBreak:"break-all"},children:"Drag logs: "+JSON.stringify(T.drag)}),Object(r.jsx)("div",{style:{wordBreak:"break-all"},children:"Items height: "+JSON.stringify(T.heights)}),Object(r.jsx)("div",{style:{wordBreak:"break-all"},children:"height: "+X}),Object(r.jsx)("div",{style:{wordBreak:"break-all"},children:"Current index: ".concat(V)})]}),Object(r.jsx)("div",{className:"deck-wrapper",style:Object(s.a)({},n&&X>0?{minHeight:fe}:{}),children:Object(r.jsx)("div",{className:"deck",style:Object(s.a)({},n&&X>0?{height:X}:{}),children:se.map((function(e,t){var c=e.x,i=e.y,a=e.z,o=e.rot;return Object(r.jsx)(u.a.div,{style:Object(s.a)(Object(s.a)({},t>V+p||t<V?{visibility:"hidden"}:{}),{},{zIndex:t===V?0:t>V?-t:0,transform:Object(u.b)([c,i,o],m),touchAction:"pan-y"}),className:"card-container",children:Object(r.jsxs)(u.a.div,Object(s.a)(Object(s.a)({},ke(t)),{},{id:"card__".concat(t),style:Object(s.a)(Object(s.a)({},n?{boxSizing:"border-box"}:{}),{},{transform:Object(u.b)([a],x)}),className:"card-outer ".concat(t===V?"front-card":""),children:[t===V&&"left"===Y&&h,t===V&&"right"===Y&&I,Object(r.jsx)("div",{id:"card_ch_".concat(t),ref:Oe,className:"card-inner",children:C(F[t],t)})]}))},t)}))})})]})})),v=Object(c.memo)(p),y=(n(145),[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"C"},{id:4,name:"D"},{id:5,name:"E"}]),w=[{id:6,name:"F"},{id:7,name:"G"},{id:8,name:"H"},{id:9,name:"I"},{id:10,name:"J"}];function S(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{height:(t=50,n=250,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t)+t))});var t,n}))}var k=function(){var e=Object(c.useState)((function(){return S(y)})),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useRef)(null),o=Object(c.useCallback)((function(e,t){var n=e.height,c=e.name;return Object(r.jsxs)("div",{className:"my-card",children:[Object(r.jsx)("div",{className:"my-card__img",children:"image"}),Object(r.jsx)("div",{className:"my-card__text-content",style:{height:n},onClick:function(){return function(e){console.log("CLICK",e)}(t)},children:Object(r.jsxs)("div",{style:{color:"red",textAlign:"center"},children:["card text",Object(r.jsx)("div",{children:c})]})})]},"cardItem__".concat(t))}),[]);return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{className:"controllers-wrapper",children:[Object(r.jsx)("button",{className:"controller",onClick:function(){i((function(e){return[].concat(Object(d.a)(e),Object(d.a)(S(w)))}))},children:"Add cards"}),Object(r.jsx)("button",{className:"controller",onClick:function(){if(a.current&&a.current.swipeBack){var e=a.current.swipeBack(),t=e.item,n=e.index;console.log("%cremoveBack","color: brown",{item:t,index:n})}},children:"Return Last"}),Object(r.jsx)("button",{className:"controller",onClick:function(){if(a.current&&a.current.swipeLeft){var e=a.current.swipeLeft(),t=e.item,n=e.index;console.log("%cswipeLeft","color: green",{item:t,index:n})}},children:"Swipe Left"}),Object(r.jsx)("button",{className:"controller",onClick:function(){if(a.current&&a.current.swipeRight){var e=a.current.swipeRight(),t=e.item,n=e.index;console.log("%cswipeRight","color: blue",{item:t,index:n})}},children:"Swipe Right"}),Object(r.jsx)("input",{id:"next-index",type:"number",placeholder:"index",min:0,className:"input"}),Object(r.jsx)("button",{className:"controller",onClick:function(){return e=document.getElementById("next-index").value,void(a.current&&a.current.jumpToCardIndex&&a.current.jumpToCardIndex(e));var e},children:"To index"}),Object(r.jsx)("input",{id:"new-name",placeholder:"name",className:"input"}),Object(r.jsx)("button",{className:"controller",onClick:function(){return function(e){if(a.current&&a.current.currentIndex>=0){var t=a.current.currentIndex;a.current.updateCard(t,(function(t){return Object(s.a)(Object(s.a)({},t),{},{name:e})}))}}(document.getElementById("new-name").value)},children:"Set new name"})]}),Object(r.jsx)("p",{style:{padding:"0 16px",margin:0,color:"#CECECE",fontStyle:"italic"},children:"Deck adapts its height on viewport height change"}),Object(r.jsx)(v,{items:n,renderItem:o,ref:a,adaptiveHeight:!0,maxVisibleStack:4,leftLabel:Object(r.jsx)("div",{style:{position:"absolute",right:0},children:"LEFT"}),rightLabel:Object(r.jsx)("div",{style:{position:"absolute",left:0},children:"RIGHT"}),onSwipeLeft:function(e,t){console.log("onSwipeLeft",{item:e,index:t})},onSwipeRight:function(e,t){console.log("onSwipeRight",{item:e,index:t})},onSwipeEnd:function(){},onSwipeStart:function(){}})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root")),C()},55:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.d42c55b5.chunk.js.map